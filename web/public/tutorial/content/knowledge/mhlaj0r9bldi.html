<h1 id="N48r22292Yyjw-o8LxNyv_" data-block-mark="{}" class="no-font-size">一、信号是什么</h1><p id="N-EFUqTpk5NVslwR43EUAJ" data-block-mark="{}">在节点图的制作过程中，你应当碰到了许多需要进行全局通信的情景。</p><p id="NC0XhG5VMPjgFUXdkHcqZz" data-block-mark="{}">例如：当某个机关触发时，会发生以下几件事：</p><div class="prosemirror-list-new" data-node-id="NLNhe9Fnf_UUF_6SfmWE1H" listId="d927c315" data-list-kind="bullet" data-list-indent="1" data-list-style="&apos;\e69c&apos;:0|&apos;\e69c&apos;:0|&apos;\e69c&apos;:0" style="--list-indent: 1;--list-type: &apos;\e69c&apos;;--list-content: &apos;\e69c&apos;;--ordered-list-index-size: 16px;--bullet-list-index-size: 8px;" id="NLNhe9Fnf_UUF_6SfmWE1H" data-block-mark="{}"><div class="list-marker list-marker-click-target" contenteditable="false"></div><div class="list-content">某个大门打开</div></div><div class="prosemirror-list-new" data-node-id="NpSL-YeO28LgXAg8TlbeQB" listId="d927c315" data-list-kind="bullet" data-list-indent="1" data-list-style="&apos;\e69c&apos;:0|&apos;\e69c&apos;:0|&apos;\e69c&apos;:0" style="--list-indent: 1;--list-type: &apos;\e69c&apos;;--list-content: &apos;\e69c&apos;;--ordered-list-index-size: 16px;--bullet-list-index-size: 8px;" id="NpSL-YeO28LgXAg8TlbeQB" data-block-mark="{}"><div class="list-marker list-marker-click-target" contenteditable="false"></div><div class="list-content">几个火把上燃起火焰</div></div><div class="prosemirror-list-new" data-node-id="NYA3kwOny792Ter7wMGEQh" listId="d927c315" data-list-kind="bullet" data-list-indent="1" data-list-style="&apos;\e69c&apos;:0|&apos;\e69c&apos;:0|&apos;\e69c&apos;:0" style="--list-indent: 1;--list-type: &apos;\e69c&apos;;--list-content: &apos;\e69c&apos;;--ordered-list-index-size: 16px;--bullet-list-index-size: 8px;" id="NYA3kwOny792Ter7wMGEQh" data-block-mark="{}"><div class="list-marker list-marker-click-target" contenteditable="false"></div><div class="list-content">为角色添加一个新的技能</div></div><p id="N1AyEOZhRhVaKpoHUxULb7" data-block-mark="{}">如果在机关这端制作相关的逻辑，会需要按照下图撰写逻辑</p><p id="Ncqct9Msd9-RjXpUlLVq2a" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhlaj0r9bldi/1cf9ae6e-24a7-4b40-af3e-f675b34fdd49.png" style="width: 1468px;aspect-ratio:1.7902439024390244;"></p><p id="N9SBRbyvD570GjoB5owSny" data-block-mark="{}">当需要迭代上述逻辑时，例如：在燃起火焰之前需要新增【修改丘丘人上的<span style="color: rgba(255,8,0,1)"><em>自定义变量</em></span>】，那么每次迭代都需要修改这个机关的节点图，这可能不是一种合理的实现方式</p><p id="NBPUFc-uC211yTCymJBTpM" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhlaj0r9bldi/254c7913-c4a9-45e9-b958-4a09d1e0a5f0.png" style="width: 1254px;aspect-ratio:1.324181626187962;"></p><p id="NC01zeIi2Es_yV1Sa9fL42" data-block-mark="{}"><span style="color: rgba(255,8,0,1)"><em>信号</em></span>就是用来解决上述问题的功能。</p><p id="NmEZ3_evhIOOQ_4TLsD8dU" data-block-mark="{}"></p><h1 id="NXoeGyS5O84AkQCogFOtaE" class="no-font-size"><strong>二、信号的功能</strong></h1><div class="prosemirror-list-new" data-node-id="NczVz4LT0crXiAqaHZB4_v" listId="12beb571" data-list-kind="bullet" data-list-indent="1" data-list-style="&apos;\e69c&apos;:0|&apos;\e69c&apos;:0|&apos;\e69c&apos;:0" style="--list-indent: 1;--list-type: &apos;\e69c&apos;;--list-content: &apos;\e69c&apos;;--ordered-list-index-size: 16px;--bullet-list-index-size: 8px;" id="NczVz4LT0crXiAqaHZB4_v" data-block-mark="{}"><div class="list-marker list-marker-click-target" contenteditable="false"></div><div class="list-content">信号是一个全局自定义的结构。你可以为其添加多个任意类型的<span style="color: rgba(255,8,0,1)"><em>信号参数</em></span></div></div><div class="prosemirror-list-new" data-node-id="NgYEDwDS8SHUV7Eo8JO9qp" listId="12beb571" data-list-kind="bullet" data-list-indent="1" data-list-style="&apos;\e69c&apos;:0|&apos;\e69c&apos;:0|&apos;\e69c&apos;:0" style="--list-indent: 1;--list-type: &apos;\e69c&apos;;--list-content: &apos;\e69c&apos;;--ordered-list-index-size: 16px;--bullet-list-index-size: 8px;" id="NgYEDwDS8SHUV7Eo8JO9qp" data-block-mark="{}"><div class="list-marker list-marker-click-target" contenteditable="false"></div><div class="list-content">每个信号通过<span style="color: rgba(255,8,0,1)"><em>信号名</em></span>来进行标识</div></div><div class="prosemirror-list-new" data-node-id="N4zx8foVV9u47D4VEHWfun" listId="12beb571" data-list-kind="bullet" data-list-indent="1" data-list-style="&apos;\e69c&apos;:0|&apos;\e69c&apos;:0|&apos;\e69c&apos;:0" style="--list-indent: 1;--list-type: &apos;\e69c&apos;;--list-content: &apos;\e69c&apos;;--ordered-list-index-size: 16px;--bullet-list-index-size: 8px;" id="N4zx8foVV9u47D4VEHWfun" data-block-mark="{}"><div class="list-marker list-marker-click-target" contenteditable="false"></div><div class="list-content">可以从任意实体的服务端节点图上<span style="color: rgba(255,8,0,1)"><em>发送信号</em></span>。发送信号的操作是全局的</div></div><div class="prosemirror-list-new" data-node-id="NcMStCK3bnjqBWnP1u4pyv" listId="12beb571" data-list-kind="bullet" data-list-indent="1" data-list-style="&apos;\e69c&apos;:0|&apos;\e69c&apos;:0|&apos;\e69c&apos;:0" style="--list-indent: 1;--list-type: &apos;\e69c&apos;;--list-content: &apos;\e69c&apos;;--ordered-list-index-size: 16px;--bullet-list-index-size: 8px;" id="NcMStCK3bnjqBWnP1u4pyv" data-block-mark="{}"><div class="list-marker list-marker-click-target" contenteditable="false"></div><div class="list-content">你可以在任意实体的服务端节点图上<span style="color: rgba(255,8,0,1)"><em>接收信号</em></span>。需要注意的是信号的发送和接收都是全局的。这意味着实体1发送的信号，关卡内的任意实体均可以监听并接收这个信号</div></div><p id="Ng1zI7jPwj1R27D1PDjRuc" data-block-mark="{}"></p><p id="N8N8qEJfw5PfTMJC6_dtPq" data-block-mark="{}">在使用信号后，上述的案例可以将逻辑放到各个实体上实现</p><p id="Nn3YwRSEkRwdpzECFzHP6x" data-block-mark="{}">当机关触发时，发送信号【机关触发信号】</p><p id="NJvSDbDXBnNb8t24Yg8JcU" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhlaj0r9bldi/68b910dd-6805-43bf-b000-2854df963b19.png" style="width: 724px;aspect-ratio:1.7445783132530122;"></p><p id="NspL84cXkTlnHqJmAozVkC" data-block-mark="{}">大门接收【机关触发信号】的信号，然后修改自身的预设状态（大门打开）</p><p id="N9mFnfIrrT7Rwd4Iq1HYMe" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhlaj0r9bldi/33127426-bf37-4247-b94f-261e80cd7abd.png" style="width: 745px;aspect-ratio:1.4326923076923077;"></p><p id="Nc8918wXcTHVZny26gptRu" data-block-mark="{}">火把接收【机关触发信号】的信号，然后播放火焰特效</p><p id="NrLHMeoT_Lm-fVMCHvglaw" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhlaj0r9bldi/83dc2892-ca7b-4e5f-a7a0-3ed239efa88c.png" style="width: 653px;aspect-ratio:1.104906937394247;"></p><p id="N74EdlV4tytUly_mKexSbK" data-block-mark="{}">角色接收【机关触发信号】的信号，为自身添加一个技能</p><p id="N4vWAdAb8Tma2R8hkjGHBQ" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhlaj0r9bldi/10301568-6542-488b-86be-9f064e537459.png" style="width: 786px;aspect-ratio:1.5086372360844529;"></p><p id="NfoL-XkwOCsG_eK1q6zUJ1" data-block-mark="{}">此时如果需要新增【修改丘丘人上的自定义变量】的逻辑，可以直接在丘丘人的节点图上：</p><p id="NTOJof5BqvoOweE_va6S9i" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhlaj0r9bldi/020f6ec3-a3f9-4c91-98f4-c331bdaf96b0.png" style="width: 624px;aspect-ratio:1.3805309734513274;"></p><p id="NEahutTSr36FdQsUk7HvlH" data-block-mark="{}"></p><p id="NbY403x2lrpTf7hcEgrE8z" data-block-mark="{}">可以看到，即使新增、调整逻辑，可以完全只修改需要关心的实体的节点图，而不需要修改其他实体的节点图。</p><p id="NaWr5D9Qy2Buh30ClRQ7i9" data-block-mark="{}">这在游戏逻辑开发中，这种<strong>每个实体只根据自己关心的事件处理对应的逻辑，而不是直接操作其他实体</strong>是很重要的【<strong>解耦</strong>】思想，可以用来分离实体之间复杂的交互逻辑</p><h1 id="Nd8vzgqm6f4010Bmb9dgat" data-block-mark="{}" class="no-font-size">三、信号的配置</h1><p id="NuKE239_813lx-NVlA7NYj" data-block-mark="{}">在<span style="color: rgba(255,8,0,1)"><em>千星沙箱</em></span>中，可以进行信号的配置</p><p id="NRiHV7W5YO4b_kKK7wiFUk" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhlaj0r9bldi/36defa3b-c04e-4b7b-baa7-932582fa16fc.png" style="width: 1147px;aspect-ratio:1.8896210873146624;"></p><p id="NInzAmcOtmgP4ZdxZNl5XU" data-block-mark="{}">可以打开信号管理器界面，在这个界面可以新增、修改信号</p><p id="NbAuQ5sJII5B-jBcNcHPgt" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhlaj0r9bldi/eacdb16b-78da-4d94-a6eb-a7e83764560a.png" style="width: 650px;aspect-ratio:1.0833333333333333;"></p><p id="NyAdA-2IN9SENL8R-a3_nS" data-block-mark="{}">每个信号由【信号名】进行标识，不同信号名的信号，即使参数构成相同，也是不同的信号</p><p id="NQzEDcatcRiMQio5Tuk1gQ" data-block-mark="{}">每个信号可以声明任意数量的自定义参数，这些参数可以是任意合法的节点图数据类型</p><p id="NvQxcfkIYfVBKK_g3u8D3S" data-block-mark="{}"></p><p id="NmGiwlur9t9UgBYVithvS7" data-block-mark="{}">以上图为例，这个信号的信号名为【信号_1】，有三个参数</p><p id="NBPK-ayTRyNCSAtFuw2Qo8" data-block-mark="{}">参数_1：类型为整数</p><p id="NSBdVFV5RuMpyOvuL6BRcI" data-block-mark="{}">参数_2：类型为字符串</p><p id="N_MHpMt_huUeODuM000gcr" data-block-mark="{}">参数_3：类型为实体列表</p><h1 id="NthBTpuzsJBg7kzmVeJh2y" data-block-mark="{}" class="no-font-size">四、信号的使用</h1><p id="NLiPgqdvJSIz1L0C2W1gZt" data-block-mark="{}">在节点图中，可以使用【发送信号】和【接收信号】节点调用信号</p><p id="N4mYDmiJPfpypzhB2P3NMt" data-block-mark="{&quot;bold&quot;:true}"><strong>发送信号</strong></p><p id="NFZAT49o2thwg1JWUrTujV" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhlaj0r9bldi/4d0c3fc1-6671-4df7-92c5-0afa392ad4d1.png" style="width: 269px;aspect-ratio:1.2629107981220657;"></p><p id="NhRpjxwWv7ND1S7vDsrYKF" data-block-mark="{}">在节点图中放置了发送信号节点后，需要先选择【信号名】</p><p id="N0pAH9b5ULkI9TCILcstwg" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhlaj0r9bldi/2b3ff027-d991-4bce-a356-fcbe075edef9.png" style="width: 565px;aspect-ratio:0.889763779527559;"></p><p id="NndgjIjXa7viv-BFEIMjHq" data-block-mark="{}">选择【信号名】后，该节点的入参会新增这个信号名对应的信号的所有参数，可以将值传入信号中，并在接收信号端接收这一组参数</p><p id="N_F3Fe-Gmbcu5OGk6t7XA5" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhlaj0r9bldi/1c3c6f99-e547-4e8a-ab79-81baeb07a14f.png" style="width: 311px;aspect-ratio:0.713302752293578;"></p><p id="N_YF0WZSDDSsAkYnbVBYIt" data-block-mark="{}"></p><p id="N4myy62e9zkolXA9dX-OGN" data-block-mark="{&quot;bold&quot;:true}"><strong>监听信号</strong></p><p id="NDbX7FyOYFvwk2t1ZY0MiK" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhlaj0r9bldi/b8b3ce2a-91ca-45c7-bfad-b29cffffeea6.png" style="width: 335px;aspect-ratio:1.3241106719367588;"></p><p id="N_l59ZtvDaRDfVEE847dRH" data-block-mark="{}">可以在任意的实体上接收信号，同样需要先选择【信号名】</p><p id="NIpi9pLe5_Lto6vW1zizXT" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhlaj0r9bldi/f57932f1-2522-4ba6-8b29-dc4da0e943bd.png" style="width: 530px;aspect-ratio:0.8576051779935275;"></p><p id="NfVpZThh8FBHg1rXSpCT17" data-block-mark="{}">选择【信号名】后，该节点的出参会新增这个信号名对应信号的所有参数，可以从这些出参取到由【发送信号】节点传入的参数值</p><p id="NsP0x9v5M9X7eKWcCC5-OF" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhlaj0r9bldi/c7e9ebd8-7115-460a-86c3-23c30a1fcd0f.png" style="width: 453px;aspect-ratio:1.0066666666666666;"></p><p id="NxXaL16Anyrhrlaezms8fp"></p>