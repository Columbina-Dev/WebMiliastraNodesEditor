<p id="NwWjb_juV-AYj5MTKNL4K4">当游戏运行中，场景内的<span style="color: rgba(255,0,0,1)"><em>实体</em></span>过多时，可能会导致游戏负载超标，当用户遇到此类问题时可以考虑使用<span style="color: rgba(255,0,0,1)"><em>视野检测</em></span>来进行<span style="color: rgba(255,0,0,1)"><em>负载优化</em></span>。</p><p id="Nr6Y_DogFQLsEb5CFd4Nxd" data-block-mark="{}">简单来说，用户可以指定一些非关键的实体，使其在角色距离较远时，在本地卸载，以此来节约该部分物件的开销</p><h1 id="Ns4JIMLLFkqrMZXHbN2AoX" data-block-mark="{}" class="no-font-size">一、视野检测参数配置</h1><p id="NF2otaSnavJxprgkzFPxf0" data-block-mark="{}">视野检测参数有两个配置入口：</p><h2 id="Nr7cZUD0YMJkv2OAub8_IS" data-block-mark="{}" class="no-font-size">1.负载优化全局配置</h2><p id="NHmf0DK8MvT0QGoSF-13Lp" data-block-mark="{}">在关卡设置界面，可以看到负载优化选项</p><p id="NdmQZQ8szPniSsgVWJQ3zE" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhlb1vivioys/0cde0b24-4d31-4ffc-ace5-cd98a7a3c11b.png" style="width: 1496px;aspect-ratio:1.7937649880095923;"></p><p id="NEghDcB7p5ERn7KQDADdQn" data-block-mark="{}">视野检测是否生效：</p><p id="NpBIWDD76Rz-zhIj39Cli3" style="text-indent: 32px; text-align: left"><span style="color: rgba(89,111,254,1)"><em>跟随实体配置</em></span>：当选择该选项时，该项负载优化将会依据元件/实体上的属性配置进行生效</p><p id="NDmTsMcwSqie-k4gY47RpH" style="text-indent: 32px" data-block-mark="{}"><span style="color: rgba(89,111,254,1)"><em>关闭</em></span>：当选择该选项时，该项负载优化功能将会关闭</p><h2 id="NeUODb4g-uxwgs0ywkRjG_" data-block-mark="{}" class="no-font-size">2.负载优化单位属性</h2><p id="NCUN9SZUZomQqZMmtTTqMB" data-block-mark="{}">在物件的属性页签，可以看到负载优化属性，如果设置为“开启”，则该物件的实体将会接受负载优化逻辑，从而可能在距离角色过远时在<span style="color: rgba(255,0,0,1)"><em>本地销毁</em></span></p><p id="NXvwnsZVZZ0xV_p6Itl7Ht" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhlb1vivioys/fa044505-6741-4aae-af91-e323ab76d82e.png" style="width: 283px;aspect-ratio:0.42492492492492495;"></p><h1 id="NlE6Sb0ufJUHLbKmbFBwEz" data-block-mark="{}" class="no-font-size">二、视野检测的生效规则</h1><h2 id="NLEY-IkpnU88vxr3TIgotN" data-block-mark="{}" class="no-font-size">1.本地销毁状态</h2><p id="NIPras5HnCN7hFrU5H82VM" data-block-mark="{}">上述的“本地销毁”状态区别于实体的销毁，可以理解为仅仅是在客户端“不显示”了，但实体的逻辑依然存在：</p><div class="prosemirror-list-new" data-node-id="NyHV3xPFYDckGvHPESTaXc" listId="8236cdde" data-list-kind="bullet" data-list-indent="1" data-list-style="&apos;\e69c&apos;:0|&apos;\e69c&apos;:0|&apos;\e69c&apos;:0" auto-composed-image-block="false" style="--list-indent: 1;--list-type: &apos;\e69c&apos;;--list-content: &apos;\e69c&apos;;--ordered-list-index-size: 16px;--bullet-list-index-size: 8px;" id="NyHV3xPFYDckGvHPESTaXc" data-block-mark="{}"><div class="list-marker list-marker-click-target" contenteditable="false"></div><div class="list-content">依然可以通过节点图节点进行索引，并控制其逻辑</div></div><div class="prosemirror-list-new" data-node-id="NLjDsH2QuAxWqZywhYKiLm" listId="8236cdde" data-list-kind="bullet" data-list-indent="1" data-list-style="&apos;\e69c&apos;:0|&apos;\e69c&apos;:0|&apos;\e69c&apos;:0" auto-composed-image-block="false" style="--list-indent: 1;--list-type: &apos;\e69c&apos;;--list-content: &apos;\e69c&apos;;--ordered-list-index-size: 16px;--bullet-list-index-size: 8px;" id="NLjDsH2QuAxWqZywhYKiLm" data-block-mark="{}"><div class="list-marker list-marker-click-target" contenteditable="false"></div><div class="list-content">在玩家靠近一个本地销毁状态的实体时，实体在本地会重新被创建</div></div><div class="prosemirror-list-new" data-node-id="NLUcc2YXuKK6C3kXSC91it" listId="8236cdde" data-list-kind="bullet" data-list-indent="1" data-list-style="&apos;\e69c&apos;:0|&apos;\e69c&apos;:0|&apos;\e69c&apos;:0" auto-composed-image-block="false" style="--list-indent: 1;--list-type: &apos;\e69c&apos;;--list-content: &apos;\e69c&apos;;--ordered-list-index-size: 16px;--bullet-list-index-size: 8px;" id="NLUcc2YXuKK6C3kXSC91it" data-block-mark="{}"><div class="list-marker list-marker-click-target" contenteditable="false"></div><div class="list-content">在联机下，不同用户的本地被销毁的实体根据其距离本地角色距离，可能各不相同</div></div><div class="prosemirror-list-new" data-node-id="NQLRAg72ETfDQEUKZCfBfE" listId="8236cdde" data-list-kind="bullet" data-list-indent="1" data-list-style="&apos;\e69c&apos;:0|&apos;\e69c&apos;:0|&apos;\e69c&apos;:0" auto-composed-image-block="false" style="--list-indent: 1;--list-type: &apos;\e69c&apos;;--list-content: &apos;\e69c&apos;;--ordered-list-index-size: 16px;--bullet-list-index-size: 8px;" id="NQLRAg72ETfDQEUKZCfBfE" data-block-mark="{}"><div class="list-marker list-marker-click-target" contenteditable="false"></div><div class="list-content">当本地实体不存在时，部分纯本地逻辑可能会不执行，如播放特效等</div></div><h2 id="NSpTukktDEi62Uu_lWPVp4" data-block-mark="{}" class="no-font-size">2.销毁规则（视野网格）</h2><h3 id="N-FoTiR3oBjS0TnYkf3qJ8" data-block-mark="{}" class="no-font-size">(1)平面网格化</h3><p id="NL3lc5AeMBdm14gbLLpv9S" data-block-mark="{}">在视野检测负载优化规则下，用户实际游玩的场景会被分为多个大小相同的正方形区域，则在运行时，角色单位和场景内的其他实体都会被落入某一个唯一的网格内：</p><p id="N25uQpdqIteNsGAu8AzFdi" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhlb1vivioys/6bfaaaf4-3508-4c94-9d85-4050e84a23e2.png" style="width: 515px;aspect-ratio:0.9519408502772643;"></p><p id="Nzotl5Dt4XHTisgduZnCYT" data-block-mark="{}">以角色单位所在网格为中心，周围的复数个网格即为“<span style="color: rgba(255,0,0,1)"><em>视野检测范围</em></span>”，在启动视野检测优化时，视野检测范围外的实体机会被“本地销毁”，并且在游玩时不可见，如下图，假设视野范围为3*3：</p><p id="NgbdvnpsOA5IfrkZVZUYM5" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhlb1vivioys/14630baf-41ef-4a0f-9483-7ff91a6650e9.png" style="width: 514px;aspect-ratio:0.936247723132969;"></p><h3 id="NJvg0x21_Uhh1Eshxi0V9-" data-block-mark="{}" class="no-font-size">(2)角色跨网格</h3><p id="NYfh4XVcLX6FyDqUD6_iTv" data-block-mark="{}">当角色位置发生运动时，视野检测范围也会变化，同时实体在进/出角色的视野检测范围时也会被创建或销毁，如下图：</p><p id="Noak04l5vlt3kYjf4pSvOb" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhlb1vivioys/83cf84fe-5714-477b-8fb5-1abb86d1bd80.png" style="width: 1096px;aspect-ratio:2.022140221402214;"></p><h3 id="NomFMflzC-PviRvNQTMdDC" data-block-mark="{}" class="no-font-size">(3)实体跨网格</h3><p id="NcCJsgcxUytSlSeBR0c7iq" data-block-mark="{}">通过运动器或造物的行为使实体跨越网格时，如果触发了进/出角色视野检测范围，也会被创建或销毁：</p><p id="Nfi9EYIyRqFotjRdmQ05LJ" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhlb1vivioys/4a0dfb77-26b3-4e9b-a540-a7b752a810f1.png" style="width: 1096px;aspect-ratio:2.0110091743119267;"></p><h1 id="NCUpMPKWluCRyuGK8kZPu2" data-block-mark="{}" class="no-font-size">三、超限模式下的视野检测规格</h1><h2 id="NH2gfbFt_EhIc36-03kKQc" data-block-mark="{}" class="no-font-size">1.网格大小</h2><p id="NzgjbJwxy0x435fxNcBk9C" data-block-mark="{}">超限模式下的网格正方形大小为40m*40m</p><h2 id="NM3SyI8rXxos_O1ZAF5Cm2" data-block-mark="{}" class="no-font-size">2.视野检测范围</h2><p id="NJOvcsLAiueLA-HfsrzAZm" data-block-mark="{}">超限模式下的实际视野检测范围为除自身网格外的周围三格范围，如下图所示：</p><p id="NBr3lNfhCgp1ovYo6G7Jxi" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhlb1vivioys/5922e849-b739-4b39-a28d-fbe713ec6558.png" style="width: 578px;aspect-ratio:1.1245136186770428;"></p><p id="Nd1Kr9_aiHyCvZu5CdBzfn"></p>