<h1 id="NjNBIq7cLMw7v_WbdV2KcU" data-block-mark="{}" class="no-font-size">一、节点图功能概述</h1><h2 id="NaC584sUNrSll3y_oqh3UR" data-block-mark="{}" class="no-font-size">1.自定义逻辑的载体</h2><p id="N9qUAj1tqEq1rIhWvRQNvd" data-block-mark="{}">节点图是一类由创作者编写的自定义逻辑</p><p id="Nt1Mjl_3WOf07E_ttwlibB" data-block-mark="{}"></p><p id="N9WNNDZDsa6Th4xIWJKBfI" data-block-mark="{}">如下图所示，就是一个典型的实体节点图</p><p id="NtEcgT_WSuKtwL1CehKjMG" data-block-mark="{}" style="text-align: left">它描述了一个炸药桶的逻辑：这个炸药桶受到攻击时，会使攻击者玩家积分+1（以<span style="color: rgba(255,0,0,1)"><em>自定义变量</em></span>的方式），之后会<strong>播放特效</strong>、<strong>发起攻击</strong>并销毁自身</p><p id="NP--fwpnTJd5j6mRdbgBhC" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhjwjrr5n73i/0c5f91d1-a6c8-4438-88c7-a58a1b71899c.png" style="width: 1343px;aspect-ratio:3.0662100456621006;"></p><p id="N6V03TrFYV49FIlSu1lw5i" data-block-mark="{}"></p><p id="NmPicKskCdFKzAvGu2lxYa" data-block-mark="{}">通常来说，每张节点图都会包含以下两个要素</p><p id="N07o6-_bP-79XMhEVfvbQ9" data-block-mark="{}"><span style="color: rgba(255,0,0,1)"><em>节点</em></span>：节点图的基础功能单元，每个节点都描述了一种特定的功能。例如：<strong>播放特效</strong>、<strong>加法运算</strong>等</p><p id="NsFV85DJbTGW9XHBtzImBO" data-block-mark="{}"><span style="color: rgba(255,0,0,1)"><em>连线</em></span>：分为<span style="color: rgba(255,0,0,1)"><em>执行流连线</em></span>（节点图中白色连线）以及<span style="color: rgba(255,0,0,1)"><em>运算流连线</em></span>（节点图中蓝色连线）。连线将各个节点连接起来，用于描述节点的执行顺序以及参数传递的逻辑</p><h2 id="NremMxvK1xwm-Qk0MKyuA1" data-block-mark="{}" class="no-font-size">2.节点图的用法</h2><p id="N8el7w83yhXtAeDPQHZ74o" data-block-mark="{}">如前所述，任何创作者想要自行设计和制作的逻辑，均可以通过配置和挂载节点图来实现</p><p id="NodCfbcuNvPfkgzYwcQYUD" data-block-mark="{}">例如：</p><div class="prosemirror-list-new" data-node-id="NTrY5KoZ4AcTC-7BbJ6th0" listId="8d48d6c5" data-list-kind="bullet" data-list-indent="1" data-list-style="&apos;\e69c&apos;:0|&apos;\e69c&apos;:0|&apos;\e69c&apos;:0" auto-composed-image-block="false" style="--list-indent: 1;--list-type: &apos;\e69c&apos;;--list-content: &apos;\e69c&apos;;--ordered-list-index-size: 16px;--bullet-list-index-size: 8px;" id="NTrY5KoZ4AcTC-7BbJ6th0" data-block-mark="{}"><div class="list-marker list-marker-click-target" contenteditable="false"></div><div class="list-content">在<span style="color: rgba(255,0,0,1)"><em>元件</em></span>上挂载节点图，来实现一个受到攻击后会爆炸的炸药桶（即上图实现功能）</div></div><div class="prosemirror-list-new" data-node-id="N6wJoV8sLd3_zrVmu8fHdx" listId="8d48d6c5" data-list-kind="bullet" data-list-indent="1" data-list-style="&apos;\e69c&apos;:0|&apos;\e69c&apos;:0|&apos;\e69c&apos;:0" auto-composed-image-block="false" style="--list-indent: 1;--list-type: &apos;\e69c&apos;;--list-content: &apos;\e69c&apos;;--ordered-list-index-size: 16px;--bullet-list-index-size: 8px;" id="N6wJoV8sLd3_zrVmu8fHdx" data-block-mark="{}"><div class="list-marker list-marker-click-target" contenteditable="false"></div><div class="list-content">在<span style="color: rgba(255,0,0,1)"><em>关卡实体</em></span>上挂载节点图，用于实现一个全局计分的机制</div></div><div class="prosemirror-list-new" data-node-id="NhBnPqfk9d_P1q-MtiqGwq" listId="8d48d6c5" data-list-kind="bullet" data-list-indent="1" data-list-style="&apos;\e69c&apos;:0|&apos;\e69c&apos;:0|&apos;\e69c&apos;:0" auto-composed-image-block="false" style="--list-indent: 1;--list-type: &apos;\e69c&apos;;--list-content: &apos;\e69c&apos;;--ordered-list-index-size: 16px;--bullet-list-index-size: 8px;" id="NhBnPqfk9d_P1q-MtiqGwq" data-block-mark="{}"><div class="list-marker list-marker-click-target" contenteditable="false"></div><div class="list-content">在<span style="color: rgba(255,0,0,1)"><em>命中检测组件</em></span>中使用本地过滤器节点，用于筛选命中检测组件可以命中的目标</div></div><div class="prosemirror-list-new" data-node-id="N7pE-JdJkxrPTekM19u-Rn" listId="8d48d6c5" data-list-kind="bullet" data-list-indent="1" data-list-style="&apos;\e69c&apos;:0|&apos;\e69c&apos;:0|&apos;\e69c&apos;:0" auto-composed-image-block="false" style="--list-indent: 1;--list-type: &apos;\e69c&apos;;--list-content: &apos;\e69c&apos;;--ordered-list-index-size: 16px;--bullet-list-index-size: 8px;" id="N7pE-JdJkxrPTekM19u-Rn" data-block-mark="{}"><div class="list-marker list-marker-click-target" contenteditable="false"></div><div class="list-content">在<span style="color: rgba(255,0,0,1)"><em>自定义技能</em></span>编辑中使用技能节点图，用于编写自定义技能的逻辑</div></div><h1 id="NtbaXyjWOyivH8jJLmKMWo" data-block-mark="{}" class="no-font-size">二、节点图的类型</h1><p id="N5uLx4ZrUd6XXe_c91wcLu" data-block-mark="{}"></p><p id="N2ntvViuXeQcq2ZafVBvGb" data-block-mark="{}">当前模式中，节点图被分为五类</p><div class="prosemirror-list-new" data-node-id="N3PAHiLhkbTp236857eKEP" listId="622f381a" data-list-kind="bullet" data-list-indent="1" data-list-style="&apos;\e69c&apos;:0|&apos;\e69c&apos;:0|&apos;\e69c&apos;:0" auto-composed-image-block="false" style="--list-indent: 1;--list-type: &apos;\e69c&apos;;--list-content: &apos;\e69c&apos;;--ordered-list-index-size: 16px;--bullet-list-index-size: 8px;" id="N3PAHiLhkbTp236857eKEP" data-block-mark="{}"><div class="list-marker list-marker-click-target" contenteditable="false"></div><div class="list-content">实体节点图</div></div><div class="prosemirror-list-new" data-node-id="NeVQ-P2RVZHmAd92n9EzZu" listId="622f381a" data-list-kind="bullet" data-list-indent="1" data-list-style="&apos;\e69c&apos;:0|&apos;\e69c&apos;:0|&apos;\e69c&apos;:0" auto-composed-image-block="false" style="--list-indent: 1;--list-type: &apos;\e69c&apos;;--list-content: &apos;\e69c&apos;;--ordered-list-index-size: 16px;--bullet-list-index-size: 8px;" id="NeVQ-P2RVZHmAd92n9EzZu" data-block-mark="{}"><div class="list-marker list-marker-click-target" contenteditable="false"></div><div class="list-content">单位状态节点图</div></div><div class="prosemirror-list-new" data-node-id="NRMsAnzfe8OSy-taWKt9by" listId="622f381a" data-list-kind="bullet" data-list-indent="1" data-list-style="&apos;\e69c&apos;:0|&apos;\e69c&apos;:0|&apos;\e69c&apos;:0" auto-composed-image-block="false" style="--list-indent: 1;--list-type: &apos;\e69c&apos;;--list-content: &apos;\e69c&apos;;--ordered-list-index-size: 16px;--bullet-list-index-size: 8px;" id="NRMsAnzfe8OSy-taWKt9by" data-block-mark="{}"><div class="list-marker list-marker-click-target" contenteditable="false"></div><div class="list-content">职业节点图</div></div><div class="prosemirror-list-new" data-node-id="N7mYd6vzRA7jB_0ORnk2N_" listId="622f381a" data-list-kind="bullet" data-list-indent="1" data-list-style="&apos;\e69c&apos;:0|&apos;\e69c&apos;:0|&apos;\e69c&apos;:0" auto-composed-image-block="false" style="--list-indent: 1;--list-type: &apos;\e69c&apos;;--list-content: &apos;\e69c&apos;;--ordered-list-index-size: 16px;--bullet-list-index-size: 8px;" id="N7mYd6vzRA7jB_0ORnk2N_" data-block-mark="{}"><div class="list-marker list-marker-click-target" contenteditable="false"></div><div class="list-content">技能节点图</div></div><div class="prosemirror-list-new" data-node-id="Njlp46vasqIde-GBVIwftv" listId="622f381a" data-list-kind="bullet" data-list-indent="1" data-list-style="&apos;\e69c&apos;:0|&apos;\e69c&apos;:0|&apos;\e69c&apos;:0" auto-composed-image-block="false" style="--list-indent: 1;--list-type: &apos;\e69c&apos;;--list-content: &apos;\e69c&apos;;--ordered-list-index-size: 16px;--bullet-list-index-size: 8px;" id="Njlp46vasqIde-GBVIwftv" data-block-mark="{}"><div class="list-marker list-marker-click-target" contenteditable="false"></div><div class="list-content">本地过滤器节点图</div></div><p id="NNnjSNs1INNwh3en8Wbusx" data-block-mark="{}"></p><p id="N-4jggL1tM-I6azath6Dtf" data-block-mark="{}">其中<span style="color: rgba(255,0,0,1)"><em>实体节点图</em></span>、<span style="color: rgba(255,0,0,1)"><em>单位状态节点图</em></span>和<span style="color: rgba(255,0,0,1)"><em>职业节点图</em></span>的逻辑在服务端运行，因此统称为<span style="color: rgba(255,0,0,1)"><em>服务端节点图</em></span>；</p><p id="NbFh5fbt3VF3SsQhS2wzfO" data-block-mark="{&quot;textStyle&quot;:{&quot;backgroundColor&quot;:null,&quot;color&quot;:&quot;rgba(64,169,255,1)&quot;,&quot;fontFamily&quot;:null,&quot;fontSize&quot;:null,&quot;fontName&quot;:null},&quot;italic&quot;:true}"><span style="color: rgba(255,0,0,1)"><em>技能节点图</em></span>和<span style="color: rgba(255,0,0,1)"><em>本地过滤器节点图</em></span>都是在玩家本地运行，因此统称为<span style="color: rgba(255,0,0,1)"><em>本地节点图</em></span></p><p id="Nd24hbA3fktLJFeVWyKkiQ" data-block-mark="{}"></p><p id="NJ38F3ZZKOLBL1QWTXezzp" data-block-mark="{}">它们的特点如下表</p><div class="table-wrapper"><table id="NC56-L_9rgIDkdm5Re2XRp" minWidth="66" class="table-wrapper" style="font-size: 16px; border-collapse: collapse;; vertical-align: top;; width:1194px;" border="1" cellspacing="0"><colgroup><col style="width: 245px;"><col style="width: 948px;"></colgroup><tbody style="vertical-align: top"><tr class="table-row" style=" height: 43px"><td id="NsVKFhfFiTjKx5iCgQYx3-" data-block-mark="{&quot;bold&quot;:true}" colspan="1" rowspan="1" data-colwidth="245"><p id="NwkCfXQnArnuQ368HNL45_" data-block-mark="{&quot;bold&quot;:true}"><strong>节点图类型</strong></p></td><td id="N1c4l63kBzpM96IFqYfl7p" data-block-mark="{&quot;bold&quot;:true}" colspan="1" rowspan="1" data-colwidth="948"><p id="NCWCWAaphVgQw2liqVsX6o" data-block-mark="{&quot;bold&quot;:true}"><strong>功能说明</strong></p></td></tr><tr class="table-row"><td id="NeBQv8e-FEH1LWtDR1X21w" data-block-mark="{}" colspan="1" rowspan="1" data-colwidth="245"><p id="NtQgQdilsNYPIRdc17sMrm" data-block-mark="{}">实体节点图</p></td><td id="NYooi26O_LR9LWNUGFkQqS" data-block-mark="{}" colspan="1" rowspan="1" data-colwidth="948"><p id="NSjGTaZ8iOv98Y4O3ESQaa" data-block-mark="{}" style="text-align: left">挂载于实体上的节点图，通常来说是实体逻辑的承载者。</p><p id="NawL3mqOM18oFg19jMAhOf" data-block-mark="{}">生命周期跟随所挂载的实体，当实体被销毁时，节点图也同样不再生效</p></td></tr><tr class="table-row"><td id="N4XIsQWWP5xr8yxY9EIfUd" data-block-mark="{}" colspan="1" rowspan="1" data-colwidth="245"><p id="NV7wZ_N4nYm_ojh198mtTa" data-block-mark="{}">单位状态节点图</p></td><td id="NJ_-R7oQY2gMyDOVpT1Y9d" data-block-mark="{}" colspan="1" rowspan="1" data-colwidth="948"><p id="NjPQl52MTkaigHDwO_8CdD" data-block-mark="{}">挂载于<span style="color: rgba(255,0,0,1)"><em>单位状态</em></span>上的节点图，通常用于实现单位状态的自定义逻辑。例如：一个持续攻击附近敌对单位的火环状态，可以通过单位状态来实现持续攻击的效果</p><p id="NnmueFLN28bzn_YwhdS3Sa" data-block-mark="{}">生命周期跟随单位状态。当单位状态被移除时，节点图失效</p></td></tr><tr class="table-row"><td id="Nm4sKCAfJbMQT_Y0Z5nU_H" data-block-mark="{}" colspan="1" rowspan="1" data-colwidth="245"><p id="NOR4jIHs51M-RVROEZJP7V" data-block-mark="{}">职业节点图</p></td><td id="NucXizg1zBEi3UBtAF2pDj" data-block-mark="{}" colspan="1" rowspan="1" data-colwidth="948"><p id="NqadGK52RAUu8GsVe4r9D0" data-block-mark="{}">挂载于<span style="color: rgba(255,0,0,1)"><em>职业</em></span>配置上的节点图。用于实现一些职业特有的逻辑。可以选择挂载在玩家或角色实体上</p><p id="NRVofrs3MuKdrCPMW9uymw" data-block-mark="{}">生命周期跟随职业，当职业切换时，切换前的职业节点图会失效，切换后的职业节点图生效</p></td></tr><tr class="table-row"><td id="Nb7LQsMGSy9xN0HDcT3zp9" data-block-mark="{}" colspan="1" rowspan="1" data-colwidth="245"><p id="N_e5ytldNqUbAnIJYqUn0W" data-block-mark="{}">技能节点图</p></td><td id="NhbX3YxxgsuyluWwAUg89g" data-block-mark="{}" colspan="1" rowspan="1" data-colwidth="948"><p id="NO9Qk0PSW15AHx_CnKnb5J" data-block-mark="{}" style="text-align: left">自定义技能使用的节点图，用于描述一个技能的逻辑</p><p id="N3A__H5Kj0gWfEvzZQEE_W" data-block-mark="{}">当自定义技能运行到挂载了技能节点图的时点时，会开始运行该技能节点图</p></td></tr><tr class="table-row" style=" height: 163px"><td id="NFLfGon0vbh5PTyn81fn9u" data-block-mark="{}" colspan="1" rowspan="1" data-colwidth="245"><p id="NRsgqZrMprCDlshRiXXriD" data-block-mark="{}">本地过滤器节点图</p></td><td id="NUlE5MTepbBD2NfYfwCx9p" data-block-mark="{}" colspan="1" rowspan="1" data-colwidth="948"><p id="NpUtQpFjRb-g7p_luAoeSm" data-block-mark="{}">在各个组件中使用的节点图，用于描述一种自定义的、在本地执行的判定规则。</p><p id="NUZv8iipWvQ_vvagK-Eg7r" data-block-mark="{}"><strong>本地过滤器节点-布尔型</strong><br>节点图固定会以一个布尔值（是/否）作为返回值</p><p id="Ntm_8NFPo86S-k8w919P7E" data-block-mark="{}" style="text-align: left">例如：命中检测组件中可以配置本地过滤器节点图，当本地过滤器节点图的返回结果为是时，认为碰撞到了合法的目标，触发【<strong>命中检测触发时</strong>】事件，反之则认为是不合法的目标，不触发事件</p></td></tr></tbody></table></div><p id="NQh0BZEwEyJR-amoRgxt8k" data-block-mark="{}"></p><p id="NfbFk4-YlP8pzvvYapF5uW" data-block-mark="{}">由于服务端节点图是一个更全面且更基础的节点图类型，后文会侧重以服务端节点图的功能进行介绍。技能节点图以及本地过滤节点图与服务端节点图规则基本一致，特殊部分会单独介绍</p><p id="Nh41dYwJg3IpUJj3MR9pTQ" data-block-mark="{}"></p><h1 id="NRGRFOZUnbB409Jr7jMcVY" data-block-mark="{}" class="no-font-size">三、节点图的挂载</h1><p id="NM3yG9xgO36am4v12BAGy4" data-block-mark="{}">如前文所述，节点图需要通过挂载在实体、单位状态等逻辑元素上时才可以生效，下面是上述五种节点图的挂载方式</p><p id="NFDdHd6qCdxFpC2He2Gs-U" data-block-mark="{}">在挂载前，需要先在<span style="color: rgba(255,0,0,1)"><em>千星沙箱</em></span>中制作一张节点图，见<span class="CardKMLink"><a target="_blank" rel="noopener noreferrer nofollow" href="/ys/ugc/tutorial//detail/mhb3ho0k5l2w">节点图编辑指引</a></span>。在制作完成后，对应的节点图挂载入口即可添加已制作的节点图</p><h2 id="NxkxSJU0itY2DPPEZQyIr6" data-block-mark="{}" class="no-font-size">1.实体节点图</h2><p id="N31k9POuXhX10a6Q5Bgccu" data-block-mark="{}">入口位于：实体或元件的详情编辑页-节点图页签</p><p id="NZBMZCJtSdZnUcc3RKlB0k" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhjwjrr5n73i/b61605af-0959-4113-aa6a-9256f390768d.png" style="width: 1516px;aspect-ratio:1.742528735632184;"></p><p id="Ny1_ofYHNMCEa_RPaTQwJK" data-block-mark="{}">(1)实体或元件编辑页面切换到节点图页签，图中A</p><p id="NQVijo47QyOPxoZxbp3MvD" data-block-mark="{}">(2)点击新增节点图，图中B</p><h2 id="NexY_pPg-mqIcuNlp_rL6w" data-block-mark="{}" class="no-font-size">2.单位状态节点图</h2><p id="Nnrl-3scjFbFxFCv57Na75" data-block-mark="{}">入口位于：单位状态详情编辑页-通用信息-状态节点图</p><p id="NSFejXkuIU9XEbCZ63JOsC" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhjwjrr5n73i/cf2d8992-0f4a-4ff0-a611-7a19059a145d.png" style="width: 1489px;aspect-ratio:1.7313953488372094;"></p><h2 id="NC1KuyFYNkhw_R7Rex78V5" data-block-mark="{}" class="no-font-size">3.职业节点图</h2><p id="Np_W3F4XHEZs9e6-122jUI" data-block-mark="{}">入口位于：自定义职业详情编辑页-节点图页签</p><p id="NDicyjhfm3x_fTeTXw4FyR" data-block-mark="{}">可以切换配置玩家节点图或角色节点图，两者分别在玩家换上该职业时，对玩家实体和角色实体生效</p><p id="N058-WYFkz3dINncLe8sxn" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhjwjrr5n73i/b24e35d4-fc67-4f23-bc44-8c3e9cf59e09.png" style="width: 1505px;aspect-ratio:1.7358708189158016;"></p><p id="NFR6-P17yypp7I90xhrwqb" data-block-mark="{}">(1)切换到职业配置的节点图页签，图中A</p><p id="NdbOo3zXsAla7omoA6iz0t" data-block-mark="{}">(2)切换玩家或角色节点图，图中B</p><p id="NuILOXgpqrh5ur1GHmZph6" data-block-mark="{}">(3)点击新增节点图，图中C</p><h2 id="NgY_VJE_kiKHStANQ2geF0" data-block-mark="{}" class="no-font-size">4.技能节点图</h2><p id="N8rGQsKzOjE-4MwacRS45E" data-block-mark="{}">入口位于：自定义技能编辑页-动画编辑-时间轴</p><p id="NaTyLSQs644IJsEVcxItwa" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhjwjrr5n73i/b4327b94-488e-4df6-97af-a4a2262d447c.png" style="width: 1499px;aspect-ratio:1.7470862470862472;"></p><p id="N3L8C8RYKr9UkyBJ9ZB4A2" data-block-mark="{}">进入动画编辑页面</p><p id="NWae-nU8JptZ_0JUrf6K0y" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhjwjrr5n73i/3010b3fd-4835-4a80-9c82-1a365afe95c0.png" style="width: 1504px;aspect-ratio:1.7347174163783161;"></p><p id="N7FCDd99LRAB58map-DuSQ" data-block-mark="{}">在节点图事件轨道上右键点击添加事件，后在框内选择要添加的节点图</p><h2 id="NY2pYZUPY_wzFBKWeT1PBv" data-block-mark="{}" class="no-font-size">5.本地过滤器节点图</h2><p id="NYTwwI1ZkDVNPCJl41SNS_" data-block-mark="{}">本地过滤器节点图在多个组件中均有使用，以下以命中检测组件为例</p><p id="Nj3iUjnvB7Cu2sDG_hTTbN" data-block-mark="{}">入口：命中检测组件-命中规则页-本地过滤器节点图</p><p id="NckpbyQZA4J-HwiC1QHkxQ" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhjwjrr5n73i/b36c426a-4d4b-436f-ab5a-095b68144f1e.png" style="width: 1507px;aspect-ratio:1.7361751152073732;"></p><p id="Nzt7aOAbney5Bx5INU9uk7" data-block-mark="{}"></p>