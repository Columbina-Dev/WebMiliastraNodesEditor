<h1 id="N5irRqLTldqNKSDbveQW5Y" data-block-mark="{}" class="no-font-size">一、节点图变量是什么</h1><h2 id="NYcEDQ9h1Owvs3Nh30kF9h" class="no-font-size">1.节点图变量的定义</h2><p id="NvAb_LFJhns4nCJ2-Tek1O" data-block-mark="{}">节点图变量是一种生命周期跟随节点图的变量（仅在<span style="color: rgba(255,0,0,1)"><em>服务端节点图</em></span>中可用）</p><p id="NFsEcolZMhemoa_QQfgDf0" data-block-mark="{}">其作为变量自身的功能与<span class="CardKMLink"><a target="_blank" rel="noopener noreferrer nofollow" href="/ys/ugc/tutorial//detail/mhso1b9wjica">自定义变量</a></span>基本一致，但二者生命周期与定义域有一些不同</p><h2 id="NrrsOfBqn3gwyxRLFeOpOe" class="no-font-size">2.生命周期与定义域</h2><p id="N1-PWPX7r08ntFycaFGKAE" data-block-mark="{}">节点图变量的生命周期跟随节点图。以实体节点图为例，当节点图挂载在实体上时，该实体就持有了这些变量，可以通过相关的操作节点设置、获取以及监听事件</p><p id="NrcfCRxjJ_Iaw4SixtJmpv" data-block-mark="{}">节点图变量仅在节点图所在的节点图内可以进行访问（设置、获取以及监听事件）</p><h1 id="NykxoRkmCHFJqajc38VkxW" class="no-font-size">二、与自定义变量的异同</h1><p id="NwBVy76l78ksP-wUQCUzXl" data-block-mark="{}">下表整理了节点图变量与自定义变量的异同</p><div class="table-wrapper"><table id="NCC624MF6H8lD5Y9v5pcwD" minWidth="66" class="table-wrapper" style="font-size: 16px; border-collapse: collapse;; vertical-align: top;; width:787px;" border="1" cellspacing="0"><colgroup><col style="width: 180px;"><col style="width: 310px;"><col style="width: 296px;"></colgroup><tbody style="vertical-align: top"><tr class="table-row"><td id="N4VqaegxhGjwy43WOLwqfg" data-block-mark="{}" colspan="1" rowspan="1" data-colwidth="180"><p id="NfO8bA_yFHJzKhisyIy9N9" data-block-mark="{}"></p></td><td id="NyA-CWLcWA99CpLGOKv55W" data-block-mark="{&quot;bold&quot;:true}" colspan="1" rowspan="1" data-colwidth="310"><p id="NV0vr1IUndkUzVtSQrSm37" data-block-mark="{&quot;bold&quot;:true}"><strong>节点图变量</strong></p></td><td id="NE_JUL1BKYzjUdfkMqLuvn" data-block-mark="{&quot;bold&quot;:true}" colspan="1" rowspan="1" data-colwidth="296"><p id="N1qv9aQC-ieNC3XGzfAssy" data-block-mark="{&quot;bold&quot;:true}"><strong>自定义变量</strong></p></td></tr><tr class="table-row"><td id="NimvTDDwXxhbHnqazFMzo3" data-block-mark="{}" colspan="1" rowspan="1" data-colwidth="180"><p id="N9vfNzVJ_GdehoyGH4yzsx" data-block-mark="{}">生命周期</p></td><td id="N8-t3eNrN08skHo44NdYxL" data-block-mark="{}" colspan="1" rowspan="1" data-colwidth="310"><p id="N7y-DQg_e_gdjZqOdLBDZz" data-block-mark="{}">跟随节点图</p></td><td id="N4Zlsh-eKeuWnzJaOzaaCB" data-block-mark="{}" colspan="1" rowspan="1" data-colwidth="296"><p id="NmLcfnIuU90t7GBpDd9dXm" data-block-mark="{}">跟随实体</p></td></tr><tr class="table-row"><td id="N1TcoWmjat_-3q_z8ihux1" data-block-mark="{}" colspan="1" rowspan="1" data-colwidth="180"><p id="N9DxHb2SpJiFKVdJRUV0Fj" data-block-mark="{}">定义域</p></td><td id="N15-NU2a2YH-P0kZhDoC8a" data-block-mark="{}" colspan="1" rowspan="1" data-colwidth="310"><p id="Ny_Dl6CYVt3oORM6jovg6g" data-block-mark="{}">仅在定义该变量的节点图内可访问</p></td><td id="N71IIkQ3sEhgZYg9GEpqHi" data-block-mark="{}" colspan="1" rowspan="1" data-colwidth="296"><p id="NJOCwz9I0ZhEUgxA8DpRyE" data-block-mark="{}">全局可访问，需要指明访问的实体</p></td></tr><tr class="table-row" style=" height: 43px"><td id="NU1IHKm042ANcj8II1zZPG" data-block-mark="{}" colspan="1" rowspan="1" data-colwidth="180"><p id="NsUdYLA-WsofxsHzdBZrjL" data-block-mark="{}">命名规则</p></td><td id="NjQbMgFQ2mf5_cG9geza95" data-block-mark="{}" colspan="1" rowspan="1" data-colwidth="310"><p id="NO1kkUMdKVjekitWtQ8axH" data-block-mark="{}">同节点图内不可重名</p></td><td id="N9jfL3wda4i4H5wIL5cmQT" data-block-mark="{}" colspan="1" rowspan="1" data-colwidth="296"><p id="NWtGEnHVWc8E56BmOkQVDA" data-block-mark="{}">同组件（实体）内不可重名</p></td></tr><tr class="table-row"><td id="NAnwYd-zK9LEwSdoFTldZ-" data-block-mark="{}" colspan="1" rowspan="1" data-colwidth="180"><p id="NL4HgTx2aLAbrLsma_bw6s" data-block-mark="{}">是否可在实体上覆写</p></td><td id="NdX3uPk0VE8ytOzkisU5rD" data-block-mark="{}" colspan="1" rowspan="1" data-colwidth="310"><p id="NkIW2946Af87puZ7OFBnKs" data-block-mark="{}">可以。但需要手动将其对外暴露</p></td><td id="NTX5EZsTO5_F6XzT-356LM" data-block-mark="{}" colspan="1" rowspan="1" data-colwidth="296"><p id="N_JGLWefsAmtukY6pI-v9u" data-block-mark="{}">可以，遵循通用的组件参数覆写规则</p></td></tr><tr class="table-row"><td id="NGoLHeSLeTHpDqlBG_7RpX" data-block-mark="{}" colspan="1" rowspan="1" data-colwidth="180"><p id="N-weNF1_ItGHnVc1NTT6Ox" data-block-mark="{}">可用数据类型</p></td><td id="NtK6a2vTG3FgPF7V5e2TI0" data-block-mark="{}" colspan="1" rowspan="1" data-colwidth="310"><p id="NpUTWWg_Li8D-fXKr2RnfF" data-block-mark="{}">所有基础和列表数据类型</p></td><td id="NKsGjt8y7LZLNUQ0WNej-h" data-block-mark="{}" colspan="1" rowspan="1" data-colwidth="296"><p id="NmTdL7Q7VNWSt3u0FgS3Vm" data-block-mark="{}">所有基础和列表数据类型</p></td></tr><tr class="table-row"><td id="NZ2C4yBUe1UaPBt7d4HK62" data-block-mark="{}" colspan="1" rowspan="1" data-colwidth="180" style="vertical-align: top;"><p id="NwGaWqCL2O6iIr1L_vuAdN" data-block-mark="{}">相关操作</p></td><td id="NSuZLXuAzEMExda26wLagz" data-block-mark="{}" colspan="1" rowspan="1" data-colwidth="310" style="vertical-align: top;"><p id="N_jkwt1j8BCP6BtK4owx6u" data-block-mark="{}">设置值、获取值、监听变化</p></td><td id="NoPkDwJfcTKWONPzTXE1rO" data-block-mark="{}" colspan="1" rowspan="1" data-colwidth="296" style="vertical-align: top;"><p id="NyqM0nd0_F_bSuy4sWlFIe" data-block-mark="{}">设置值、获取值、监听变化</p></td></tr></tbody></table></div><h1 id="N02iDDCxB18vWcvY1jhNh8" class="no-font-size"><strong>三、为什么要使用节点图变量</strong></h1><p id="NGs9wLjND4N9ZYgkLPWKou" data-block-mark="{}">相比【<span style="color: rgba(255,0,0,1)"><em>自定义变量</em></span>】，节点图变量有着以下的特点</p><div class="prosemirror-list-new" data-node-id="N75S4i-XZBZ7Sh00-qMn8N" listId="2f6cc89b" data-list-kind="bullet" data-list-indent="1" data-list-style="&apos;\e69c&apos;:0|&apos;\e69c&apos;:0|&apos;\e69c&apos;:0" style="--list-indent: 1;--list-type: &apos;\e69c&apos;;--list-content: &apos;\e69c&apos;;--ordered-list-index-size: 16px;--bullet-list-index-size: 8px;" id="N75S4i-XZBZ7Sh00-qMn8N" data-block-mark="{}"><div class="list-marker list-marker-click-target" contenteditable="false"></div><div class="list-content">使用更轻量，可以在千星沙箱内部完成定义和使用，可以在千星沙箱内完成完整的逻辑+数据的编写</div></div><div class="prosemirror-list-new" data-node-id="NUeK1hYZ2ZIK8N6jCFf-wY" listId="2f6cc89b" data-list-kind="bullet" data-list-indent="1" data-list-style="&apos;\e69c&apos;:0|&apos;\e69c&apos;:0|&apos;\e69c&apos;:0" style="--list-indent: 1;--list-type: &apos;\e69c&apos;;--list-content: &apos;\e69c&apos;;--ordered-list-index-size: 16px;--bullet-list-index-size: 8px;" id="NUeK1hYZ2ZIK8N6jCFf-wY" data-block-mark="{}"><div class="list-marker list-marker-click-target" contenteditable="false"></div><div class="list-content">允许重名，在实体上可以有多个同名的节点图变量（只要分布在各个节点图内即可）</div></div><div class="prosemirror-list-new" data-node-id="NYz-vSfgaGCDQZF1DMS7MU" listId="2f6cc89b" data-list-kind="bullet" data-list-indent="1" data-list-style="&apos;\e69c&apos;:0|&apos;\e69c&apos;:0|&apos;\e69c&apos;:0" style="--list-indent: 1;--list-type: &apos;\e69c&apos;;--list-content: &apos;\e69c&apos;;--ordered-list-index-size: 16px;--bullet-list-index-size: 8px;" id="NYz-vSfgaGCDQZF1DMS7MU" data-block-mark="{}"><div class="list-marker list-marker-click-target" contenteditable="false"></div><div class="list-content">避免将一些专属于节点图功能的变量暴露到外部，可以降低节点图逻辑的阅读难度</div></div><div class="prosemirror-list-new" data-node-id="NMTZ7rNlTRW97C9ob3e0Hj" listId="2f6cc89b" data-list-kind="bullet" data-list-indent="1" data-list-style="&apos;\e69c&apos;:0|&apos;\e69c&apos;:0|&apos;\e69c&apos;:0" style="--list-indent: 1;--list-type: &apos;\e69c&apos;;--list-content: &apos;\e69c&apos;;--ordered-list-index-size: 16px;--bullet-list-index-size: 8px;" id="NMTZ7rNlTRW97C9ob3e0Hj" data-block-mark="{}"><div class="list-marker list-marker-click-target" contenteditable="false"></div><div class="list-content">创作者可以更专注于节点图功能的封装，而不需要关心这个节点图具体会被挂载在哪个实体上。可以实现更模块化的设计</div></div><p id="N6DbLTuJ4SsvSnUq4uwu08" data-block-mark="{}"></p><p id="NbkWkuu6JZULBB-YhUIc-L" data-block-mark="{}">在设计玩法的数据结构时，我们推荐创作者这样利用这两个功能</p><p id="NTxhUN0DNrMW6uDDx3zUbB" data-block-mark="{}"><strong>自定义变量</strong>：将一些隶属于实体的、全局可访问的通用性数据存储在实体的自定义变量中</p><p id="NOrKhRcNax_BRRcKWTLCeM" data-block-mark="{}">例如：一个机关的受击次数，用自定义变量来存储就较为合适（因为可能需要被其他实体和节点图读取和修改）</p><p id="NM5qbe8pKD1sSI1sTKYHE0" data-block-mark="{}"><strong>节点图变量</strong>：将一些隶属于节点图的局部性的、临时性的变量存储在实体的节点图变量中</p><p id="Nliuyh1xve6L_8TwRrL9WJ" data-block-mark="{}">例如：一个物件的节点图功能中需要暂存全局的玩家列表，放在节点图变量中会更好（因为外部不需要使用这个变量，放在自定义变量组件中可能会理解困难）</p><h1 id="NK40TuKUX0kX_IwO81dHUz" data-block-mark="{}" class="no-font-size">四、节点图变量的编辑</h1><h2 id="NK5KuWgc88uQ_sv0PvyjyK" class="no-font-size">1.节点图变量页签入口</h2><p id="NYTOwiVt0GIzAC2J3CNz9O">在节点图编辑页面-快捷菜单栏，可以打开节点图变量页签</p><p id="NpBAyl9cBHXsSPXQy3zPGu" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhtshailzs7w/a8d9d5d7-5ca8-4e6b-bcc4-da74cb52f15b.png" style="width: 445px;aspect-ratio:3.2962962962962963;"></p><h2 id="N42pO3baZAjh2iofNn6Z0d" class="no-font-size">2.新建节点图变量</h2><p id="NQw9bu47LJxcFMKd1qFggQ" data-block-mark="{}">页签操作与<span class="CardKMLink"><a target="_blank" rel="noopener noreferrer nofollow" href="/ys/ugc/tutorial//detail/mhso1b9wjica">自定义变量</a></span>类似，可以新增、修改已配置的节点图变量</p><p id="NZTvxLz66RjBGfnBDOI1tC" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhtshailzs7w/819c49f2-909a-4626-ac0b-988baf4be827.png" style="width: 510px;aspect-ratio:1.705685618729097;"></p><h2 id="NCT-PZ1GV1yWYgIqc5Q6II" class="no-font-size">3.在节点图中使用节点图变量</h2><p id="Nzc4unLmvLGlIrR8bBRdqc" data-block-mark="{}">在节点图中，可以使用以下节点图相关节点（与自定义变量相关节点用法基本一致）</p><p id="N4R-sH8IcUzAlC3gzbVcI1" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhtshailzs7w/2947cae3-ff1b-425d-9430-45f2a00d423f.png" style="width: 194px;aspect-ratio:0.7461538461538462;"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhtshailzs7w/95fa8d69-7c39-46c2-8000-28470767bb83.png" style="width: 168px;aspect-ratio:0.6363636363636364;"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhtshailzs7w/b0548620-86cd-4860-92cb-9d71e297d16c.png" style="width: 328px;aspect-ratio:2.172185430463576;"></p><p id="NjZ-V1ZsWjuKCgqjl3iEa_" data-block-mark="{}">此外，可以通过拖拽节点图变量中的变量到编辑区域来创建节点图变量的操作节点</p><p id="N6wxWHam4OqIVC6tSHY3qH" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhtshailzs7w/faf98f6a-fedb-4ec6-a98a-cdfd451a2b33.png" style="width: 817px;aspect-ratio:1.7838427947598254;"></p><p id="NqohGkqfTDPD5EDmHbfB4S" data-block-mark="{}">松开后，会显示快捷创建选单，允许选择设置和获取该节点图变量</p><p id="NHje-fyo2bu9PV4EBu7cRK" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhtshailzs7w/48626acd-612f-435d-9a90-242ec82b9f9c.png" style="width: 270px;aspect-ratio:2.4107142857142856;"></p><p id="NvL7qEMwLI8L7gUZpKtgnp" data-block-mark="{}">选择后，会快速新建一个节点图变量的设置或获取节点</p><p id="Nn3gAILoPj6VaLcNF2tLXb" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhtshailzs7w/7b9c8f8d-ac55-4ce2-931c-37664147bc58.png" style="width: 245px;aspect-ratio:0.7827476038338658;"></p><h2 id="N0C8EpVjLk5BrwDJ-3uWiA" class="no-font-size">4.向关卡暴露节点图变量</h2><div class="prosemirror-list-new" data-node-id="N5o6RxmbfYxKx0JM8D1_f5" listId="2a4a0339" data-list-kind="bullet" data-list-indent="1" data-list-style="&apos;\e69c&apos;:0|&apos;\e69c&apos;:0|&apos;\e69c&apos;:0" style="--list-indent: 1;--list-type: &apos;\e69c&apos;;--list-content: &apos;\e69c&apos;;--ordered-list-index-size: 16px;--bullet-list-index-size: 8px;" id="N5o6RxmbfYxKx0JM8D1_f5" data-block-mark="{&quot;bold&quot;:true}"><div class="list-marker list-marker-click-target" contenteditable="false"></div><div class="list-content"><strong>向关卡暴露节点图变量功能</strong></div></div><p id="NkZbDwf1t7_c4b0UfYgWIa" data-block-mark="{}">通过节点图变量的暴露功能，允许在<span style="color: rgba(255,0,0,1)"><em>编辑关卡时</em></span>覆写节点图变量的值</p><p id="N61vwG7lRQ1L8VLAvFKWIV" data-block-mark="{}">例如：</p><p id="N5pvzO1DVEy_2SyQ39rPZ4" data-block-mark="{}">在一个炸药桶节点图中，使用一个节点图变量实现了炸药桶的爆炸伤害。但在关卡布设中，希望配置两个伤害不同的炸药桶</p><p id="NZDoxpMS9Sv6k9fWNdECsa" data-block-mark="{}">可以通过将该节点图变量暴露至关卡层，然后在两个炸药桶实体上填写不同的覆写值来实现</p><div class="prosemirror-list-new" data-node-id="N-CI22kKvFTWwbCMlIhNSL" listId="e018c379" data-list-kind="bullet" data-list-indent="1" data-list-style="&apos;\e69c&apos;:0|&apos;\e69c&apos;:0|&apos;\e69c&apos;:0" style="--list-indent: 1;--list-type: &apos;\e69c&apos;;--list-content: &apos;\e69c&apos;;--ordered-list-index-size: 16px;--bullet-list-index-size: 8px;" id="N-CI22kKvFTWwbCMlIhNSL" data-block-mark="{}"><div class="list-marker list-marker-click-target" contenteditable="false"></div><div class="list-content"><strong>向关卡暴露节点图变量操作</strong></div></div><p id="NNg99cZG9y7GcGdxgLuPIS" data-block-mark="{&quot;bold&quot;:false}">点击节点图变量前的对外暴露按钮后保存节点图，可以将该节点图变量对关卡暴露</p><p id="Nxo_e-gGRqIv1RwSTnzAkd" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhtshailzs7w/f90bbee2-8e45-49ed-9eed-08ab13ebf649.png" style="width: 510px;aspect-ratio:1.705685618729097;"></p><p id="NnWjXDdAKGc72OY8gJCmoA" data-block-mark="{}">在关卡的节点图上，可以看到目前已对外暴露的节点图变量数。</p><p id="NuvXqS8pnBtoRFmcB0-pVv" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhtshailzs7w/2d9100d0-9a93-4fb3-b610-644cbbb7440a.png" style="width: 275px;aspect-ratio:1.5895953757225434;"></p><p id="NPfUFmvsPRM8phA2JfDdde" data-block-mark="{}">点击编辑变量数，即可编辑该节点图变量在该实体上的覆写值</p><p id="NZanF8BUSfMrDpm2-Fznp8" data-block-mark="{}"><img src="https://act-webstatic.hoyoverse.com/ugc-tutorial/knowledge/sea/zh-cn/mhtshailzs7w/671f594f-df43-4514-aeeb-7e7485b78954.png" style="width: 327px;aspect-ratio:0.6011029411764706;"></p><p id="N6VGbReNbYJv3W8IjNPEEE"></p>